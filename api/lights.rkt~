#lang racket

(require "./circuit-python-base.rkt")

(provide  dim-color-by
          set-light
          set-lights)

(define (dim-color-by c n)
  `[hy-SQUARE (max 0 (- (hy-DOT ,c [hy-SQUARE 0]) ,n))
              (max 0 (- (hy-DOT ,c [hy-SQUARE 1]) ,n))
              (max 0 (- (hy-DOT ,c [hy-SQUARE 2]) ,n))])


(define-function (hardware-update-lights)
  (py-if `(not ,(py-in "lights" (get state "hardware" )))
         (set (state "hardware" "light") '[hy-SQUARE 0 0 0 0 0 0 0 0 0 0])
         '(setv dummy "dummy"))
            
  (loop n 10
    (set (state "hardware" "light" n)
         (get strip n))))


(define-function (set-lights c)
  (loop n 10
    `(set-light n c)))
  

(define-function (set-light n c)
  (set (state "hardware" "light" n)
       'c))

;END LIGHTS