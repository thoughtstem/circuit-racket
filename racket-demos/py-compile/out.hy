(import express) (import tslib) (import (tslib (*))) (setv ammo 3) (setv team-color (if True (, 0 0 255) "blue")) (defn update () (global ammo) (global team-color) (do (if (= 0 ammo) (flash-effect (if True (, 255 255 255) "white") (if True (, 0 0 0) "black")) (set-lights team-color)))) (defn flash-effect (c1 c2) (global ammo) (global team-color) (do (for (n (range 4)) (set-lights c1) (do (time.sleep 0.2) (express.cpx.pixels.show)) (set-lights c2) (do (time.sleep 0.2) (express.cpx.pixels.show))))) (defn setup () (global ammo) (global team-color) (do (play-riff (, (, 261.63 0.125) (, 293.66 0.125) (, 659.25 0.125) (, 698.46 0.125) (, 783.99 0.125) (, 880.0 0.125))))) (setup) (while True (if express.cpx.button_a (do (setv ammo (- ammo 1)) (flash-effect (if True (, 255 0 0) "red") (if True (, 255 165 0) "orange")) (send-ir 5))) (ir-receive) (do (if (= tslib.current-ir-number 5) (setv team-color (if True (, 0 255 0) "green")) False) (setv tslib.current-ir-number False)) (update))