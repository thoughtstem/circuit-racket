(import tslib) (import (tslib (*))) (defn update () (global state) (do (if BUTTON_A.value (do (print "Shooting") (set-lights (, 255 0 0)) (send-ir 5) (print "DONE SHOOTING")) (set-lights (. state ["memory"] ["team-color"]))))) (defn setup () (global state) (do (do (setv (. state ["memory"] ["team-color"]) (, 0 0 255)) state))) (setup) (while True (update-buttons) (ir-receive) (do (if (= tslib.current-ir-number 5) (do (print "GOT SIGNAL...") (do (setv (. state ["memory"] ["team-color"]) (, 0 255 0)) state)) False) (setv tslib.current-ir-number False)) (hardware-update) (update) (render))